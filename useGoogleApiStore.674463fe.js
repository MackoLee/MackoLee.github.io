import{a7 as P,aI as D,a9 as C,_ as U,g as L,ab as F,ad as Q,ae as V,r as g,m as R,v as u,ag as E,ah as S,o as z,c as J,a as M,am as Y,y as T,an as k,b as q,ak as K,aJ as H}from"./entry.57d90270.js";import{f as X}from"./I18nSwitchLocaleSelectMenu.vue.6fbfd32c.js";const r=P(C.ui.strategy,C.ui.input,D),Z=L({components:{UIcon:F},inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>r.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(r.size).includes(e)}},color:{type:String,default:()=>r.default.color,validator(e){return[...C.ui.colors,...Object.keys(r.color)].includes(e)}},variant:{type:String,default:()=>r.default.variant,validator(e){return[...Object.keys(r.variant),...Object.values(r.color).flatMap(t=>Object.keys(t))].includes(e)}},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:void 0}},emits:["update:modelValue","blur"],setup(e,{emit:t,slots:p}){const{ui:a,attrs:b}=Q("input",V(e,"ui"),r,V(e,"class")),{emitFormBlur:o,emitFormInput:v,size:l,color:d,inputId:c,name:N}=X(e,r),m=g(null),O=()=>{var i;e.autofocus&&((i=m.value)==null||i.focus())},B=i=>{t("update:modelValue",i.target.value),v()},A=i=>{o(),t("blur",i)};R(()=>{setTimeout(()=>{O()},100)});const y=u(()=>{var $,G;const i=((G=($=a.value.color)==null?void 0:$[d.value])==null?void 0:G[e.variant])||a.value.variant[e.variant];return E(S(a.value.base,a.value.rounded,a.value.placeholder,a.value.size[l.value],e.padded?a.value.padding[l.value]:"p-0",i==null?void 0:i.replaceAll("{color}",d.value),(s.value||p.leading)&&a.value.leading.padding[l.value],(w.value||p.trailing)&&a.value.trailing.padding[l.value]),e.inputClass)}),s=u(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),w=u(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),h=u(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),n=u(()=>e.loading&&!s.value?e.loadingIcon:e.trailingIcon||e.icon),f=u(()=>S(a.value.icon.leading.wrapper,a.value.icon.leading.pointer,a.value.icon.leading.padding[l.value])),I=u(()=>S(a.value.icon.base,C.ui.colors.includes(d.value)&&a.value.icon.color.replaceAll("{color}",d.value),a.value.icon.size[l.value],e.loading&&"animate-spin")),W=u(()=>S(a.value.icon.trailing.wrapper,a.value.icon.trailing.pointer,a.value.icon.trailing.padding[l.value])),j=u(()=>S(a.value.icon.base,C.ui.colors.includes(d.value)&&a.value.icon.color.replaceAll("{color}",d.value),a.value.icon.size[l.value],e.loading&&!s.value&&"animate-spin"));return{ui:a,attrs:b,name:N,inputId:c,input:m,isLeading:s,isTrailing:w,inputClass:y,leadingIconName:h,leadingIconClass:I,leadingWrapperIconClass:f,trailingIconName:n,trailingIconClass:j,trailingWrapperIconClass:W,onInput:B,onBlur:A}}}),_=["id","name","value","type","required","placeholder","disabled"];function x(e,t,p,a,b,o){const v=F;return z(),J("div",{class:k(e.ui.wrapper)},[M("input",Y({id:e.inputId,ref:"input",name:e.name,value:e.modelValue,type:e.type,required:e.required,placeholder:e.placeholder,disabled:e.disabled||e.loading,class:["form-input",e.inputClass]},e.attrs,{onInput:t[0]||(t[0]=(...l)=>e.onInput&&e.onInput(...l)),onBlur:t[1]||(t[1]=(...l)=>e.onBlur&&e.onBlur(...l))}),null,16,_),T(e.$slots,"default"),e.isLeading&&e.leadingIconName||e.$slots.leading?(z(),J("span",{key:0,class:k(e.leadingWrapperIconClass)},[T(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[q(v,{name:e.leadingIconName,class:k(e.leadingIconClass)},null,8,["name","class"])])],2)):K("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(z(),J("span",{key:1,class:k(e.trailingWrapperIconClass)},[T(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[q(v,{name:e.trailingIconName,class:k(e.trailingIconClass)},null,8,["name","class"])])],2)):K("",!0)],2)}const te=U(Z,[["render",x]]),ee="https://sheets.googleapis.com/$discovery/rest?version=v4",ae="https://www.googleapis.com/auth/spreadsheets",ie=H("googleApi",()=>{const[e,t]=[window.gapi,window.google];async function p(n="sessionStorage"){if(n==="sessionStorage"){const f=sessionStorage.getItem("google_api");if(f){const I=JSON.parse(f);o.value=I.apiKey,l.value=I.spreadsheetId,c.value=I.clientId}else o.value="AIzaSyDzuZgo-pF-4be2-vA_Y0VmGUpO5WPNBgA",l.value="1s4Qkqh2CkWGOsK0LCSJ4p_Hwks1ePFpQrrvXKRmAJNw",c.value="";return}}async function a(n="sessionStorage"){if(n==="sessionStorage"){sessionStorage.setItem("google_api",JSON.stringify({apiKey:o.value,spreadsheetId:l.value,clientId:c.value}));return}}async function b(){await p()}const o=g("AIzaSyDzuZgo-pF-4be2-vA_Y0VmGUpO5WPNBgA");function v(n){o.value=n}const l=g("1s4Qkqh2CkWGOsK0LCSJ4p_Hwks1ePFpQrrvXKRmAJNw");function d(n){l.value=n}const c=g(""),N=n=>{c.value=n};g("");const m=g(!1);async function O(){await e.load("client",B)}async function B(){let n=sessionStorage.getItem("google_token")||null;n&&(n=JSON.parse(n)),await e.client.init({apiKey:o.value,discoveryDocs:[ee]}),e.client.setToken(n),m.value=!0}async function A(n="sessionStorage"){const f=e.auth.getToken();n==="sessionStorage"&&(sessionStorage.setItem("google_token",JSON.stringify(f)),sessionStorage.setItem("google_token_expires_at",time.toString()))}const y=g(!1),s=g(null);async function w(n){y.value||await h(),s.value.callback=()=>{n(),A()},e.client.getToken()===null?s.value.requestAccessToken({prompt:"consent"}):s.value.requestAccessToken({prompt:""})}async function h(){s.value=await t.accounts.oauth2.initTokenClient({client_id:c.value,scope:ae,callback:""}),y.value=!0}return{loadAll:p,saveAll:a,resetAll:b,apiKey:o,setApiKey:v,spreadsheetId:l,setSpreadsheetId:d,clientId:c,setClientId:N,gapiInited:m,loadGapi:O,saveGapiToken:A,requestAccessToken:w,gisInited:y,loadGis:h}});export{te as _,ie as u};
