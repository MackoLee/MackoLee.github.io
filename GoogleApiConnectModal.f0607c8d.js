import{_ as K,o as J}from"./DefaultHeaderFooter.18a14cf8.js";import{l as U,a9 as ae,S as j,r as V,_ as C,v as E,H as v,A as W,n as c,I as D,x as te,J as _,K as w,o as m,c as y,a as A,D as G,C as $,G as g,b as B,L as h,T as O,t as I,E as ie,F as le,y as N,w as L,$ as re,aa as oe}from"./entry.906b53e0.js";import{u as ue}from"./useGoogleApiStore.7c9f2c64.js";import"./nuxt-link.f4204530.js";import"./_arrayFilter.3acdb710.js";import"./Icon.bf25dd43.js";function M(e){return typeof e=="function"?e():U(e)}const q=()=>{};function se(e,a){function i(...l){return new Promise((u,n)=>{Promise.resolve(e(()=>a.apply(this,l),{fn:a,thisArg:this,args:l})).then(u).catch(n)})}return i}function ce(e,a={}){let i,l,u=q;const n=o=>{clearTimeout(o),u(),u=q};return o=>{const s=M(e),t=M(a.maxWait);return i&&n(i),s<=0||t!==void 0&&t<=0?(l&&(n(l),l=null),Promise.resolve(o())):new Promise((r,p)=>{u=a.rejectOnCancel?p:r,t&&!l&&(l=setTimeout(()=>{i&&n(i),l=null,r(o())},t)),i=setTimeout(()=>{l&&n(l),l=null,r(o())},s)})}}function de(e,a=200,i={}){return se(ce(a,i),e)}const S=new Map;function fe(e){const a=ae();function i(o){var s;const t=S.get(e)||new Set;t.add(o),S.set(e,t);const r=()=>u(o);return(s=a==null?void 0:a.cleanups)==null||s.push(r),r}function l(o){function s(...t){u(s),o(...t)}return i(s)}function u(o){const s=S.get(e);s&&(s.delete(o),s.size||n())}function n(){S.delete(e)}function d(o,s){var t;(t=S.get(e))==null||t.forEach(r=>r(o,s))}return{on:i,once:l,off:u,emit:d,reset:n}}const me=()=>{const e=j("form-events",void 0),a=j("form-group",void 0),i=V(!1);function l(o,s){e&&e.emit({type:o,path:s})}function u(){l("blur",a==null?void 0:a.name.value),i.value=!0}function n(){l("change",a==null?void 0:a.name.value)}const d=de(()=>{i.value&&l("input",a==null?void 0:a.name.value)},300);return{emitFormBlur:u,emitFormInput:d,emitFormChange:n,formGroup:a}},ge=E({components:{UIcon:K},inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>v.ui.input.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:()=>v.ui.input.default.size,validator(e){return Object.keys(v.ui.input.size).includes(e)}},color:{type:String,default:()=>v.ui.input.default.color,validator(e){return[...v.ui.colors,...Object.keys(v.ui.input.color)].includes(e)}},variant:{type:String,default:()=>v.ui.input.default.variant,validator(e){return[...Object.keys(v.ui.input.variant),...Object.values(v.ui.input.color).flatMap(a=>Object.keys(a))].includes(e)}},inputClass:{type:String,default:null},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","blur"],setup(e,{emit:a,attrs:i,slots:l}){const u=W(),n=c(()=>D({},e.ui,u.ui.input)),{emitFormBlur:d,emitFormInput:o,formGroup:s}=me(),t=c(()=>{var f;return(f=s==null?void 0:s.error)!=null&&f.value?"red":e.color}),r=c(()=>{var f;return((f=s==null?void 0:s.size)==null?void 0:f.value)??e.size}),p=V(null),F=()=>{var f;e.autofocus&&((f=p.value)==null||f.focus())},b=f=>{a("update:modelValue",f.target.value),o()},Y=f=>{d(),a("blur",f)};te(()=>{setTimeout(()=>{F()},100)});const R=c(()=>_(n.value.wrapper,i.class)),Z=c(()=>{var P,T;const f=((T=(P=n.value.color)==null?void 0:P[t.value])==null?void 0:T[e.variant])||n.value.variant[e.variant];return _(w(n.value.base,n.value.rounded,n.value.placeholder,n.value.size[r.value],e.padded?n.value.padding[r.value]:"p-0",f==null?void 0:f.replaceAll("{color}",t.value),(z.value||l.leading)&&n.value.leading.padding[r.value],(k.value||l.trailing)&&n.value.trailing.padding[r.value]),e.inputClass)}),z=c(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),k=c(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),H=c(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),Q=c(()=>e.loading&&!z.value?e.loadingIcon:e.trailingIcon||e.icon),X=c(()=>w(n.value.icon.leading.wrapper,n.value.icon.leading.pointer,n.value.icon.leading.padding[r.value])),x=c(()=>w(n.value.icon.base,u.ui.colors.includes(t.value)&&n.value.icon.color.replaceAll("{color}",t.value),n.value.icon.size[r.value],e.loading&&"animate-spin")),ee=c(()=>w(n.value.icon.trailing.wrapper,n.value.icon.trailing.pointer,n.value.icon.trailing.padding[r.value])),ne=c(()=>w(n.value.icon.base,u.ui.colors.includes(t.value)&&n.value.icon.color.replaceAll("{color}",t.value),n.value.icon.size[r.value],e.loading&&!z.value&&"animate-spin"));return{attrs:J(i,["class"]),ui:n,input:p,isLeading:z,isTrailing:k,wrapperClass:R,inputClass:Z,leadingIconName:H,leadingIconClass:x,leadingWrapperIconClass:X,trailingIconName:Q,trailingIconClass:ne,trailingWrapperIconClass:ee,onInput:b,onBlur:Y}}}),pe=["name","value","type","required","placeholder","disabled"];function ve(e,a,i,l,u,n){const d=K;return m(),y("div",{class:g(e.wrapperClass)},[A("input",G({ref:"input",name:e.name,value:e.modelValue,type:e.type,required:e.required,placeholder:e.placeholder,disabled:e.disabled||e.loading,class:["form-input",e.inputClass]},e.attrs,{onInput:a[0]||(a[0]=(...o)=>e.onInput&&e.onInput(...o)),onBlur:a[1]||(a[1]=(...o)=>e.onBlur&&e.onBlur(...o))}),null,16,pe),$(e.$slots,"default"),e.isLeading&&e.leadingIconName||e.$slots.leading?(m(),y("span",{key:0,class:g(e.leadingWrapperIconClass)},[$(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[B(d,{name:e.leadingIconName,class:g(e.leadingIconClass)},null,8,["name","class"])])],2)):h("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(m(),y("span",{key:1,class:g(e.trailingWrapperIconClass)},[$(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[B(d,{name:e.trailingIconName,class:g(e.trailingIconClass)},null,8,["name","class"])])],2)):h("",!0)],2)}const ye=C(ge,[["render",ve]]),he=E({inheritAttrs:!1,props:{name:{type:String,default:null},size:{type:String,default:null,validator(e){return Object.keys(v.ui.formGroup.size).includes(e)}},label:{type:String,default:null},description:{type:String,default:null},required:{type:Boolean,default:!1},help:{type:String,default:null},error:{type:[String,Boolean],default:null},hint:{type:String,default:null},ui:{type:Object,default:()=>({})}},setup(e,{attrs:a}){const i=W(),l=c(()=>D({},e.ui,i.ui.formGroup)),u=c(()=>_(l.value.wrapper,a.class)),n=j("form-errors",null),d=c(()=>{var s,t;return e.error&&typeof e.error=="string"||typeof e.error=="boolean"?e.error:(t=(s=n==null?void 0:n.value)==null?void 0:s.find(r=>r.path===e.name))==null?void 0:t.message}),o=c(()=>l.value.size[e.size??i.ui.input.default.size]);return O("form-group",{error:d,name:c(()=>e.name),size:c(()=>e.size)}),{attrs:J(a,["class"]),ui:l,wrapperClass:u,size:o,error:d}}});function be(e,a,i,l,u,n){return m(),y("div",G({class:e.wrapperClass},e.attrs),[A("label",null,[e.label?(m(),y("div",{key:0,class:g([e.ui.label.wrapper,e.size])},[A("p",{class:g([e.ui.label.base,e.required?e.ui.label.required:""])},I(e.label),3),e.hint?(m(),y("span",{key:0,class:g([e.ui.hint])},I(e.hint),3)):h("",!0)],2)):h("",!0),e.description?(m(),y("p",{key:1,class:g([e.ui.description,e.size])},I(e.description),3)):h("",!0),A("div",{class:g([e.label?e.ui.container:""])},[$(e.$slots,"default",ie(le({error:e.error}))),e.error&&typeof e.error!="boolean"?(m(),y("p",{key:0,class:g([e.ui.error,e.size])},I(e.error),3)):e.help?(m(),y("p",{key:1,class:g([e.ui.help,e.size])},I(e.help),3)):h("",!0)],2)])],16)}const we=C(he,[["render",be]]),Ie=E({__name:"GoogleApiKeyInput",setup(e){const a=ue(),i=c({get:()=>a.apiKey,set:l=>a.setApiKey(l)});return(l,u)=>{const n=ye,d=we;return m(),N(d,{label:"Google API Key"},{default:L(()=>[B(n,{modelValue:U(i),"onUpdate:modelValue":u[0]||(u[0]=o=>re(i)?i.value=o:null),placeholder:"Google API Key"},null,8,["modelValue"])]),_:1})}}}),Se=E({props:{schema:{type:Object,default:void 0},state:{type:Object,required:!0},validate:{type:Function,default:()=>[]},validateOn:{type:Array,default:()=>["blur","input","change","submit"]}},emits:["submit"],setup(e,{expose:a,emit:i}){const l=Math.random().toString(36).substring(7),u=fe(`form-${l}`);u.on(async t=>{var r;t.type!=="submit"&&((r=e.validateOn)!=null&&r.includes(t.type))&&await o(t.path,{silent:!0})});const n=V([]);O("form-errors",n),O("form-events",u);async function d(){let t=await e.validate(e.state);if(e.schema)if(Ae(e.schema))t=t.concat(await Be(e.state,e.schema));else if($e(e.schema))t=t.concat(await ze(e.state,e.schema));else if(Ee(e.schema))t=t.concat(await je(e.state,e.schema));else if(_e(e.schema))t=t.concat(await Oe(e.state,e.schema));else throw new Error("Form validation failed: Unsupported form schema");return t}async function o(t,r={silent:!1}){if(t){const p=n.value.filter(b=>b.path!==t),F=(await d()).filter(b=>b.path===t);n.value=p.concat(F)}else n.value=await d();if(!r.silent&&n.value.length>0)throw new Error(`Form validation failed: ${JSON.stringify(n.value,null,2)}`);return e.state}async function s(t){var p;(p=e.validateOn)!=null&&p.includes("submit")&&await o();const r=t;r.data=e.state,i("submit",t)}return a({validate:o,errors:n,setErrors(t,r){n.value=t,r?n.value=n.value.filter(p=>p.path!==r).concat(t):n.value=t},getErrors(t){return t?n.value.filter(r=>r.path===t):n.value},clear(t){t?n.value=n.value.filter(r=>r.path===t):n.value=[]}}),{onSubmit:s}}});function $e(e){return e.validate&&e.__isYupSchema__}function Ce(e){return e.inner!==void 0}async function ze(e,a){try{return await a.validate(e,{abortEarly:!1}),[]}catch(i){if(Ce(i))return i.inner.map(l=>({path:l.path??"",message:l.message}));throw i}}function Ae(e){return e.parse!==void 0}async function Be(e,a){const i=await a.safeParseAsync(e);return i.success===!1?i.error.issues.map(l=>({path:l.path.join("."),message:l.message})):[]}function Ee(e){return e.validateAsync!==void 0&&e.id!==void 0}function Fe(e){return e.isJoi===!0}async function je(e,a){try{return await a.validateAsync(e,{abortEarly:!1}),[]}catch(i){if(Fe(i))return i.details.map(l=>({path:l.path.join("."),message:l.message}));throw i}}function _e(e){return e._parse!==void 0}async function Oe(e,a){const i=await a._parse(e);return i.issues?i.issues.map(l=>({path:l.path.map(u=>u.key).join("."),message:l.message})):[]}function Ve(e,a,i,l,u,n){return m(),y("form",{onSubmit:a[0]||(a[0]=oe((...d)=>e.onSubmit&&e.onSubmit(...d),["prevent"]))},[$(e.$slots,"default")],32)}const Ne=C(Se,[["render",Ve]]),ke={};function Pe(e,a){const i=Ie,l=Ne;return m(),N(l,null,{default:L(()=>[B(i)]),_:1})}const Te=C(ke,[["render",Pe]]),Me={};function qe(e,a){const i=Te;return m(),N(i)}const Le=C(Me,[["render",qe]]);export{Le as default};
